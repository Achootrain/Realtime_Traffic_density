
ARG ULTRALYTICS_BASE="ultralytics/ultralytics:latest-python"

FROM ${ULTRALYTICS_BASE}

ENV PYTHONDONTWRITEBYTECODE=1 \
    PYTHONUNBUFFERED=1 \
    DEBIAN_FRONTEND=noninteractive \
    PIP_DEFAULT_TIMEOUT=1000

WORKDIR /app
COPY cameras.json /app/cameras.json
COPY requirements.txt /app/requirements.txt
RUN pip install --upgrade pip setuptools wheel \
    && pip --default-timeout=1000 install --no-cache-dir -r /app/requirements.txt

COPY . /app

CMD ["python", "producer.py"]
